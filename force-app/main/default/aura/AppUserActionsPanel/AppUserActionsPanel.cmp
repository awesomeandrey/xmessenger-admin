<aura:component extends="c:CommonAction" access="global" controller="AdminController"
                implements="flexipage:availableForRecordHome,force:hasRecordId">
    <lightning:notificationsLibrary aura:id="notifLib"/>
    <lightning:workspaceAPI aura:id="workspace"/>

    <aura:attribute name="_appUser" type="AppUser__x" description="Target record used by LDS." default="{}"/>

    <force:recordData recordId="{!v.recordId}" layoutType="COMPACT" targetFields="{!v._appUser}"
                      fields="ExternalId,User_Id__c,Username__c,Active__c"/>

    <div class="slds-box slds-box_x-small slds-theme_shade slds-theme_alert-texture slds-clearfix">
        <div class="slds-float_left">
            <lightning:buttonGroup>
                <aura:if isTrue="{!v._appUser.Active__c}">
                    <lightning:button variant="neutral" label="Deactivate User"
                                      onclick="{!c.deactivateAppUser}" disabled="{!v.loading}"/>
                </aura:if>
                <aura:if isTrue="{!not(v._appUser.Active__c)}">
                    <lightning:button variant="success" label="Re-activate User"
                                      onclick="{!c.reactivateAppUser}" disabled="{!v.loading}"/>
                    <lightning:button variant="destructive" label="Delete User"
                                      onclick="{!c.deleteAppUser}" disabled="{!v.loading}"/>
                </aura:if>
            </lightning:buttonGroup>
        </div>
        <div class="slds-float_right slds-p-around_medium">
            <aura:if isTrue="{!v.loading}">
                <div class="slds-is-relative">
                    <lightning:spinner alternativeText="Loading" size="small" variant="brand"/>
                </div>
            </aura:if>
        </div>
    </div>
</aura:component>